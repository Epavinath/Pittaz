<!DOCTYPE html>
<html>
<head>
<title>PITTAZ | Cart</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="p-8">

<h1 class="text-3xl font-bold mb-6">My Cart</h1>

<div id="cartItems" class="space-y-4"></div>

<div class="mt-6 text-xl font-semibold">
  Total: ₹<span id="total">0</span>
</div>

<button onclick="placeOrder()"
        class="mt-6 bg-black text-white px-6 py-3 rounded">
  Place Order
</button>


<script>
function getCart() {
  return JSON.parse(localStorage.getItem("pittazCart")) || [];
}
function saveCart(cart) {
  localStorage.setItem("pittazCart", JSON.stringify(cart));
}

function renderCart() {
  const cart = getCart();
  const container = document.getElementById("cartItems");
  const totalEl = document.getElementById("total");

  container.innerHTML = "";
  let total = 0;

  cart.forEach((item, index) => {
    total += item.price * item.quantity;

    container.innerHTML += `
  <div class="border p-4 rounded flex gap-4 items-center">
    
    <img src="${item.designImage}"
         class="w-20 h-20 border rounded object-contain" />

    <div class="flex-1">
      <p class="font-semibold">${item.name}</p>
      <p>₹${item.price}</p>
    </div>

    <div class="flex items-center gap-2">
      <button onclick="changeQty(${index}, -1)">−</button>
      <span>${item.quantity}</span>
      <button onclick="changeQty(${index}, 1)">+</button>
    </div>

  </div>
`;

  });

  totalEl.innerText = total;
}

function changeQty(index, delta) {
  const cart = getCart();
  cart[index].quantity += delta;

  if (cart[index].quantity <= 0) {
    cart.splice(index, 1);
  }

  saveCart(cart);
  renderCart();
}

renderCart();
</script>
<script>
function placeOrder() {
  const cart = getCart();
  if (cart.length === 0) {
    alert("Cart is empty");
    return;
  }

  const total = cart.reduce(
    (sum, item) => sum + item.price * item.quantity, 0
  );

  const orders = JSON.parse(localStorage.getItem("pittazOrders")) || [];

  orders.push({
    id: "ORD-" + Date.now(),
    items: cart,
    total,
    status: "Pending",
    date: new Date().toLocaleString()
  });

  localStorage.setItem("pittazOrders", JSON.stringify(orders));
  localStorage.removeItem("pittazCart");

  alert("Order placed successfully ✅");
  location.reload();
}
</script>


</body>
</html>
